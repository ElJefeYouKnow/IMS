<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Catalog</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body data-ds="pro">
  <div class="app">
    <aside class="sidebar">
      <div>
        <div class="brand">Inventory Management System</div>
        <div class="subtitle">by Modulr</div>
        <div class="user-chip">
          <div class="avatar">US</div>
          <div>
            <div style="font-weight:700;">User</div>
            <div style="font-size:12px;opacity:0.8;"></div>
          </div>
        </div>
      </div>
                  <nav>
        <a  href="dashboard.html" data-role="admin">Dashboard</a>
        <a  href="employee-dashboard.html" data-role="employee">Dashboard</a>
        <a href="inventory-operations.html">Operations</a>
        <a href="field-purchase.html" >Field Purchases</a>
        <a href="inventory-list.html">Inventory</a>
        <a href="job-creator.html" data-role="admin">Project Manager</a>
        <a href="order-register.html" data-role="admin">Procurement &amp; Allocation</a>
        <a href="analytics.html" data-role="admin">Analytics</a>
        <a class="active" href="item-master.html" data-role="admin">Catalog</a>
        <a href="settings.html" data-role="admin">Settings</a>
        <a href="settings-employee.html" data-role="employee">Settings</a>
        <a href="support.html">Support</a>
      </nav>
    </aside>

    <main class="main">
      <header class="topbar">
        <h1>Catalog</h1>
        <div class="topbar-right"><button id="logoutBtn" class="muted">Logout</button></div>
      </header>

      <section class="card" style="margin-bottom:12px;">
        <div class="mode-tabs inventory-tabs">
          <button class="mode-btn active" data-mode="items" type="button">Items</button>
          <button class="mode-btn" data-mode="categories" type="button">Categories</button>
          <button class="mode-btn" data-mode="suppliers" type="button">Suppliers</button>
        </div>
      </section>

      <div id="items-mode" class="mode-content active">
        <section class="card inventory-card">
          <h3>Add / Edit Item</h3>
          <form id="itemForm" class="inventory-form">
            <div class="form-row">
              <label>SKU / Part Number<input id="itemCode" required placeholder="Unique identifier"></label>
              <label>Item Name<input id="itemName" required placeholder="Item description"></label>
            </div>
            <div class="form-row">
              <label>Category
                <select id="category"></select>
              </label>
              <label>Unit Price<input id="unitPrice" type="number" step="0.01" placeholder="Optional"></label>
              <label>UOM<input id="itemUom" placeholder="ea, box, pack"></label>
            </div>
            <div class="form-row">
              <label>Tags<input id="itemTags" placeholder="Fragile, Hazmat, Bulk, Internal alert"></label>
            </div>
            <div class="form-row" style="align-items:center;">
              <label style="display:flex;align-items:center;gap:8px;">
                <input id="itemLowStockEnabled" type="checkbox" checked>
                Enable low stock alerts
              </label>
              <label style="display:flex;align-items:center;gap:8px;"><input id="itemSerialized" type="checkbox"> Serialized</label>
              <label style="display:flex;align-items:center;gap:8px;"><input id="itemLot" type="checkbox"> Lot / Batch</label>
              <label style="display:flex;align-items:center;gap:8px;"><input id="itemExpires" type="checkbox"> Expiration</label>
            </div>
            <div class="form-row">
              <label style="flex:1;">Default Warehouse<input id="itemWarehouse" placeholder="e.g., WH1"></label>
              <label style="flex:1;">Default Zone<input id="itemZone" placeholder="e.g., A1"></label>
              <label style="flex:1;">Default Bin<input id="itemBin" placeholder="e.g., B-12"></label>
            </div>
            <div class="form-row">
              <label style="flex:1;">Reorder Point<input id="itemReorderPoint" type="number" min="0" step="1" placeholder="Optional"></label>
              <label style="flex:1;">Minimum Stock<input id="itemMinStock" type="number" min="0" step="1" placeholder="Optional"></label>
            </div>
            <div class="form-row">
              <label style="flex:1">Description<textarea id="description" rows="2" placeholder="Additional details"></textarea></label>
            </div>
            <div class="form-row">
              <button id="addBtn" type="submit">Add Item</button>
              <button id="clearBtn" type="button" class="muted">Clear</button>
            </div>
          </form>
        </section>

        <section class="card inventory-card">
          <h3>Import Catalog (CSV)</h3>
          <p class="muted-text">Columns: code,name,category,unitPrice,description,tags,lowStockEnabled. Header row optional.</p>
          <div class="form-row">
            <input id="importFile" type="file" accept=".csv,text/csv">
            <button id="downloadTemplateBtn" type="button" class="muted">Download Template</button>
          </div>
          <div class="form-row">
            <button id="importBtn" type="button">Import CSV</button>
            <div id="importMsg" style="font-size:0.9rem;"></div>
          </div>
        </section>

        <section class="card">
          <h3>Catalog Items</h3>
          <div style="margin-bottom:12px;">
            <input id="searchBox" type="text" placeholder="Search by code or name..." style="padding:8px;border-radius:6px;border:1px solid #e6edf3;width:100%;max-width:300px;">
          </div>
          <div class="table-scroll">
            <table id="itemTable">
              <thead><tr><th>Code</th><th>Name</th><th>Category</th><th>UOM</th><th>Unit Price</th><th>Reorder Pt</th><th>Actions</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </section>
      </div>

      <div id="categories-mode" class="mode-content">
        <section class="card inventory-card">
          <h3>Category Rules</h3>
          <form id="categoryForm" class="inventory-form">
            <div class="form-row">
              <label>Category Name<input id="categoryName" required placeholder="e.g., Electrical, Safety"></label>
              <label>Low Stock Alert
                <input id="categoryLowStock" type="number" min="0" step="1" placeholder="Default 5">
              </label>
            </div>
            <div class="form-row" style="align-items:center;">
              <label style="display:flex;align-items:center;gap:8px;">
                <input id="ruleLowStockEnabled" type="checkbox" checked>
                Enable low stock alerts
              </label>
            </div>
            <div class="form-row">
              <label>Max Checkout Qty
                <input id="categoryMaxCheckout" type="number" min="1" step="1" placeholder="Optional">
              </label>
              <label>Return Window (days)
                <input id="categoryReturnWindow" type="number" min="1" step="1" placeholder="Default 5">
              </label>
            </div>
            <div class="form-row" style="flex-wrap:wrap;gap:12px;">
              <label style="display:flex;align-items:center;gap:8px;"><input id="ruleRequireJob" type="checkbox">Require Project ID</label>
              <label style="display:flex;align-items:center;gap:8px;"><input id="ruleRequireLocation" type="checkbox">Require Location</label>
              <label style="display:flex;align-items:center;gap:8px;"><input id="ruleRequireNotes" type="checkbox">Require Notes</label>
            </div>
            <div class="form-row" style="flex-wrap:wrap;gap:12px;">
              <label style="display:flex;align-items:center;gap:8px;"><input id="ruleAllowFieldPurchase" type="checkbox" checked>Allow Field Purchase</label>
              <label style="display:flex;align-items:center;gap:8px;"><input id="ruleAllowCheckout" type="checkbox" checked>Allow Checkout</label>
              <label style="display:flex;align-items:center;gap:8px;"><input id="ruleAllowReserve" type="checkbox" checked>Allow Reserve</label>
            </div>
            <div class="form-row">
              <button id="categorySaveBtn" type="submit">Save Category</button>
              <button id="categoryClearBtn" type="button" class="muted">Clear</button>
            </div>
            <div id="categoryMsg" style="font-size:0.9rem;"></div>
          </form>
        </section>

        <section class="card">
          <h3>Categories</h3>
          <table id="categoryTable">
            <thead><tr><th>Name</th><th>Requirements</th><th>Permissions</th><th>Thresholds</th><th>Actions</th></tr></thead>
            <tbody></tbody>
          </table>
        </section>
      </div>

      <div id="suppliers-mode" class="mode-content">
        <section class="card inventory-card">
          <h3>Supplier Directory</h3>
          <div class="form-row">
            <input id="supplierSearch" type="text" placeholder="Search supplier by name, contact, or email..." style="padding:8px;border-radius:6px;border:1px solid #e6edf3;width:100%;max-width:360px;">
            <button id="supplierRefresh" type="button" class="muted">Refresh</button>
          </div>
          <table id="supplierTable">
            <thead><tr><th>Name</th><th>Contact</th><th>Lead Time</th><th>MOQ</th><th>Actions</th></tr></thead>
            <tbody></tbody>
          </table>
        </section>

        <section class="card inventory-card">
          <h3>Add / Edit Supplier</h3>
          <form id="supplierForm" class="inventory-form">
            <input type="hidden" id="supplierId">
            <div class="form-row">
              <label style="flex:1;">Name<input id="supplierName" required></label>
              <label style="flex:1;">Contact<input id="supplierContact" placeholder="Contact name"></label>
            </div>
            <div class="form-row">
              <label style="flex:1;">Email<input id="supplierEmail" type="email" placeholder="email@example.com"></label>
              <label style="flex:1;">Phone<input id="supplierPhone" placeholder="+1 555-1234"></label>
            </div>
            <div class="form-row">
              <label style="flex:1;">Lead Time Avg (days)<input id="supplierLeadAvg" type="number" min="0" step="1"></label>
              <label style="flex:1;">Lead Time Min/Max (days)<input id="supplierLeadMin" type="number" min="0" step="1" style="max-width:120px;"> / <input id="supplierLeadMax" type="number" min="0" step="1" style="max-width:120px;"></label>
              <label style="flex:1;">MOQ<input id="supplierMoq" type="number" min="0" step="1"></label>
            </div>
            <div class="form-row">
              <label style="flex:1;">Notes<textarea id="supplierNotes" rows="2" placeholder="Terms, preferred items, shipping lanes..."></textarea></label>
            </div>
            <div class="form-row">
              <button id="supplierSave" type="submit">Save Supplier</button>
              <button id="supplierClear" type="button" class="muted">Clear</button>
            </div>
            <div id="supplierMsg" style="font-size:0.9rem;"></div>
          </form>
          <p class="muted-text" style="margin-top:8px;">Edits here are shared with drawer logistics and procurement views.</p>
        </section>
      </div>
    </main>
  </div>

  <div class="modal hidden" id="itemEditModal" aria-hidden="true">
    <div class="modal-content">
      <div class="modal-header">
        <div>
          <div class="panel-kicker">Edit Item</div>
          <h2 class="modal-title">Update item details</h2>
        </div>
        <button class="icon-btn" id="itemEditClose" type="button" aria-label="Close">Ã—</button>
      </div>
      <form id="itemEditForm" class="inventory-form">
        <div class="form-row">
          <label>SKU / Part Number<input id="itemEditCode" required disabled></label>
          <label>Item Name<input id="itemEditName" required placeholder="Item description"></label>
        </div>
        <div class="form-row">
          <label>Category
            <select id="itemEditCategory"></select>
          </label>
          <label>Unit Price<input id="itemEditUnitPrice" type="number" step="0.01" placeholder="Optional"></label>
          <label>UOM<input id="itemEditUom" placeholder="ea, box, pack"></label>
        </div>
        <div class="form-row">
          <label>Tags<input id="itemEditTags" placeholder="Fragile, Hazmat, Bulk, Internal alert"></label>
        </div>
        <div class="form-row" style="align-items:center;">
          <label style="display:flex;align-items:center;gap:8px;">
            <input id="itemEditLowStockEnabled" type="checkbox" checked>
            Enable low stock alerts
          </label>
          <label style="display:flex;align-items:center;gap:8px;"><input id="itemEditSerialized" type="checkbox"> Serialized</label>
          <label style="display:flex;align-items:center;gap:8px;"><input id="itemEditLot" type="checkbox"> Lot / Batch</label>
          <label style="display:flex;align-items:center;gap:8px;"><input id="itemEditExpires" type="checkbox"> Expiration</label>
        </div>
        <div class="form-row">
          <label style="flex:1;">Default Warehouse<input id="itemEditWarehouse" placeholder="e.g., WH1"></label>
          <label style="flex:1;">Default Zone<input id="itemEditZone" placeholder="e.g., A1"></label>
          <label style="flex:1;">Default Bin<input id="itemEditBin" placeholder="e.g., B-12"></label>
        </div>
        <div class="form-row">
          <label style="flex:1;">Reorder Point<input id="itemEditReorderPoint" type="number" min="0" step="1" placeholder="Optional"></label>
          <label style="flex:1;">Minimum Stock<input id="itemEditMinStock" type="number" min="0" step="1" placeholder="Optional"></label>
        </div>
        <div class="form-row">
          <label style="flex:1">Description<textarea id="itemEditDescription" rows="2" placeholder="Additional details"></textarea></label>
        </div>
        <div class="form-row">
          <button id="itemEditSave" type="submit">Save Changes</button>
          <button id="itemEditCancel" type="button" class="muted">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <script src="js/utils.js"></script>
  <script src="js/item-master.js"></script>
  <script>document.addEventListener('DOMContentLoaded',()=>{if(window.utils){utils.wrapFetchWithRole?.();utils.applyStoredTheme?.();utils.applyNavVisibility?.();utils.setupLogout?.();}});</script>
</body>
</html>



