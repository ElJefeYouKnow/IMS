:root{
  --bg:#f7f9fb;
  --card:#ffffff;
  --accent:#0f7a57; /* dark green */
  --accent-strong:#0a1b2b; /* dark blue */
  --muted:#5c6470;
  --line: #e4e8ee;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;background:var(--bg);color:#0f172a}
.dark body{background:#06121d;color:#e6edf5}
.app{display:flex;min-height:100vh;flex-direction:row}
.main{max-width:100%;overflow-x:hidden;}
.sidebar{width:250px;background:linear-gradient(180deg,#0a1b2b 0%,#0b3d2e 100%);color:#fff;padding:22px 18px;display:flex;flex-direction:column;gap:14px;border-right:1px solid rgba(255,255,255,0.1);box-shadow:4px 0 20px rgba(0,0,0,0.25)}
.sidebar{position:sticky;top:0;align-self:flex-start;min-height:100vh}
.dark .sidebar{background:linear-gradient(180deg,#081523 0%,#0a2b20 100%);color:#e5e7eb}
.brand{font-weight:800;font-size:1.2rem;margin-bottom:4px;letter-spacing:0.4px}
.sidebar .subtitle{font-size:0.85rem;color:rgba(255,255,255,0.65);margin-top:-6px;margin-bottom:12px}
.user-chip{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,0.05);padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);cursor:pointer;transition:transform .15s ease, box-shadow .15s ease}
.user-chip:hover{transform:translateY(-2px);box-shadow:0 10px 22px rgba(0,0,0,0.2)}
.user-chip .avatar{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,#16a34a,#0f7a57);display:inline-flex;align-items:center;justify-content:center;font-weight:700;color:#fff;letter-spacing:0.5px}
.sidebar nav{display:flex;flex-direction:column;gap:6px;margin-top:6px}
.sidebar a{color:rgba(255,255,255,0.9);text-decoration:none;padding:10px 12px;border-radius:10px;display:flex;align-items:center;gap:10px;font-weight:600;border:1px solid transparent;transition:all .2s}
.sidebar a[data-role]{display:none}
.sidebar a.always-visible{display:block}
.sidebar a.active{background:rgba(15,122,87,0.22);border-color:rgba(15,122,87,0.4);color:#e8fff6}
.sidebar a:hover{background:rgba(255,255,255,0.08);border-color:rgba(255,255,255,0.12)}
.collapse{display:none}
.main{flex:1;padding:20px}
.dark .main{background:#0b1020;color:#e5e7eb}
.topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding:14px 16px;border-radius:12px;background:linear-gradient(90deg,#0a1b2b,#0f7a57);color:#fff;box-shadow:0 10px 30px rgba(10,27,43,0.28)}
.topbar h1{margin:0;font-size:1.3rem;letter-spacing:0.2px}
.topbar-right{display:flex;align-items:center;gap:12px}
.topbar .muted{background:rgba(15,122,87,0.15)!important;color:#fff;border:1px solid rgba(255,255,255,0.16)!important;padding:8px 14px;border-radius:10px;font-weight:700;box-shadow:0 6px 18px rgba(0,0,0,0.18)}
.widgets{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px;margin-bottom:24px}
.card{margin-bottom:16px}
.card:last-of-type{margin-bottom:0}
.card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 12px 32px rgba(15,27,43,0.12);border:1px solid var(--line);transition:transform .15s ease, box-shadow .15s ease}
.card:hover{transform:translateY(-2px);box-shadow:0 16px 36px rgba(15,27,43,0.16)}
.dark .card{background:#0d1624;box-shadow:0 8px 30px rgba(0,0,0,0.45);border:1px solid #12233a}
.card h3{margin:0;color:var(--muted);font-size:0.9rem;letter-spacing:0.1px}
.dark .card h3{color:#cbd5f5}
.value{font-size:1.8rem;font-weight:800;margin-top:8px;color:#0f7a57;letter-spacing:0.2px}
.dark .value{color:#5eead4}
.panel{display:grid;grid-template-columns:2fr 1fr;gap:12px}
.quick-actions .card-header{margin-bottom:10px}
.quick-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px}
.action-tile{display:block;padding:14px;border-radius:12px;border:1px solid var(--line);background:linear-gradient(135deg,rgba(15,122,87,0.1),rgba(10,27,43,0.1));text-decoration:none;color:inherit;box-shadow:0 10px 26px rgba(15,27,43,0.12);transition:transform .15s ease, box-shadow .15s ease}
.action-tile:hover{transform:translateY(-2px);box-shadow:0 14px 32px rgba(15,27,43,0.18)}
.tile-title{font-weight:800;font-size:1rem;color:#0a1b2b}
.tile-sub{color:var(--muted);font-size:0.9rem}
.dark .action-tile{border-color:#12233a;background:linear-gradient(135deg,rgba(15,122,87,0.18),rgba(10,27,43,0.22));color:#e5e7eb}
.table-card table{font-size:0.9rem}
.table-card td,.table-card th{padding:8px}
.chart-card,.table-card{background:var(--card);padding:14px;border-radius:10px;border:1px solid var(--line);box-shadow:0 6px 24px rgba(15,27,43,0.06)}
table{width:100%;border-collapse:collapse}
thead th{text-align:left;padding:8px;color:var(--muted);font-size:0.85rem}
tbody td{padding:10px;border-top:1px solid #eef2f7}
.clock{font-size:0.9rem;color:var(--muted)}
.clock-pill{display:inline-flex;align-items:center;gap:6px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.12);padding:6px 10px;border-radius:10px;box-shadow:0 6px 16px rgba(0,0,0,0.12)}
.clock-label{color:#cbd5f5;font-size:11px;font-weight:700;letter-spacing:0.5px;text-transform:uppercase}
.clock-value{color:#fff;font-weight:800;font-size:14px}
.corner-clock{position:fixed;top:16px;right:16px;z-index:200}
.dark thead th{color:#cbd5f5}
.dark tbody td{color:#fff;border-top:1px solid #1f2937}

/* Mobile-friendly nav + layout */
.mobile-nav{display:none}
.bottom-nav{position:sticky;bottom:0;left:0;right:0;background:rgba(9,14,26,0.92);backdrop-filter:blur(10px);color:#fff;z-index:60;border-top:1px solid rgba(255,255,255,0.1);box-shadow:0 -10px 30px rgba(0,0,0,0.35);display:none;padding:10px 12px;border-radius:18px 18px 0 0}
.bottom-nav .nav-toggle{width:100%;background:linear-gradient(135deg,#0f7a57,#14a26d);color:#fff;font-weight:800;padding:12px 14px;border:none;cursor:pointer;letter-spacing:0.3px;border-radius:14px;box-shadow:0 10px 24px rgba(20,162,109,0.35)}
.bottom-nav .nav-items{display:flex;gap:10px;align-items:center;overflow-x:auto;padding:10px 6px;background:transparent}
.bottom-nav a{color:rgba(255,255,255,0.95);text-decoration:none;font-size:0.95rem;padding:12px 14px;border-radius:14px;border:1px solid rgba(255,255,255,0.1);white-space:nowrap;display:inline-flex;align-items:center;gap:8px;background:rgba(255,255,255,0.05);box-shadow:0 8px 18px rgba(0,0,0,0.2)}
.bottom-nav a[data-role]{display:none}
.bottom-nav a:not([data-role]){display:inline-flex}
.bottom-nav a.active{background:linear-gradient(135deg,#0f7a57,#0a1b2b);border-color:rgba(255,255,255,0.2);box-shadow:0 12px 24px rgba(0,0,0,0.35)}
.bottom-nav.collapsed .nav-items{display:none}
.sticky-actions{position:sticky;bottom:20px;background:var(--card);padding:8px 0;z-index:10}
.dark .sticky-actions{background:#111827}

@media(max-width:900px){
  .panel{grid-template-columns:1fr}
}
@media(max-width:800px){
  .app{flex-direction:column}
  .sidebar{display:none}
  .main{padding:12px;padding-bottom:100px}
  .bottom-nav{display:block!important}
  .widgets{grid-template-columns:1fr}
  .mobile-hide{display:none}
}

/* Inventory page tweaks */
.inventory-card{margin-bottom:12px}
.inventory-form{display:flex;flex-direction:column;gap:10px}
.inventory-toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:8px 0 12px 0}
.inventory-toolbar input{max-width:260px}
.inventory-toolbar .muted{white-space:nowrap;background:#eef2f7;color:#0a1b2b;border:1px solid #d5dbe4;padding:8px 12px;border-radius:8px;font-weight:700;text-decoration:none}
.dark .inventory-toolbar .muted{background:#0f172a;color:#fff;border:1px solid #1f2937}
.filter-chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:#f8fafc;font-size:0.8rem;font-weight:700;color:#0a1b2b}
.filter-chip input{margin:0}
.scan-toggle{background:rgba(15,122,87,0.08);border-color:rgba(15,122,87,0.3)}
.sticky-bar{position:sticky;top:0;background:var(--card);padding:10px;border-radius:12px;z-index:6;box-shadow:0 10px 24px rgba(15,27,43,0.08)}
.dark .sticky-bar{background:#0d1624}
.count-input-col{display:none}
body.count-mode .count-input-col{display:table-cell}
.count-input{width:100%;max-width:120px;padding:6px;border-radius:8px;border:1px solid #e6edf3}
.row-detail{background:#f8fafc}
.row-detail td{border-top:none;padding:12px}
.row-detail .detail-grid{display:flex;flex-wrap:wrap;gap:8px}
.row-detail .detail-chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:#ffffff;font-size:0.8rem;font-weight:700;color:#0a1b2b}
.row-detail .detail-chip strong{color:var(--muted);font-weight:700}
.dark .row-detail{background:#0f172a}
.dark .row-detail .detail-chip{background:#0b1020;border-color:#1f2937;color:#e5e7eb}
.action-btn{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:8px;border:1px solid #d5dbe4;background:#eef2f7;color:#0a1b2b;font-weight:700;text-decoration:none;margin-right:6px}
.dark .action-btn{background:#0f172a;color:#fff;border:1px solid #1f2937}
.job-breakdown{display:flex;flex-direction:column;gap:6px}
.job-row{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;border-radius:8px;border:1px solid var(--line);background:#ffffff;font-size:0.85rem;font-weight:700;color:#0a1b2b}
.job-empty{color:var(--muted);font-size:0.85rem}
.dark .job-row{background:#0b1020;border-color:#1f2937;color:#e5e7eb}
.stale{color:#b45309;font-weight:800}
.discrepancy-badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:0.75rem;font-weight:800}
.discrepancy-badge.ok{background:rgba(15,122,87,0.12);color:#0a1b2b;border:1px solid rgba(15,122,87,0.3)}
.discrepancy-badge.warn{background:rgba(234,179,8,0.16);color:#854d0e;border:1px solid rgba(234,179,8,0.4)}
.discrepancy-badge.bad{background:rgba(239,68,68,0.16);color:#7f1d1d;border:1px solid rgba(239,68,68,0.4)}
.row-highlight{outline:2px solid rgba(15,122,87,0.55);outline-offset:-2px}
.form-row{display:flex;gap:10px;position:relative}
.line-items{display:flex;flex-direction:column;gap:10px;margin-bottom:8px}
.line-row{align-items:flex-end}
.order-lines-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
.order-line{border:1px dashed var(--line);padding:10px;border-radius:10px;background:rgba(15,122,87,0.04)}
.order-line.has-error{border-color:rgba(239,68,68,0.6);background:rgba(239,68,68,0.06)}
.line-error{min-height:16px;font-size:0.8rem;color:#b91c1c;margin-top:4px}
.toggle-inline{display:flex;align-items:center;gap:6px;font-size:0.85rem;font-weight:700;color:#0a1b2b}
.toggle-inline input{width:auto}
.dark .toggle-inline{color:#e5e7eb}
.summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin:10px 0}
.summary-item{background:#f8fafc;border:1px solid var(--line);border-radius:12px;padding:10px;display:flex;flex-direction:column;gap:4px}
.summary-item span{font-size:0.8rem;color:var(--muted);font-weight:700}
.summary-item strong{font-size:1.2rem;color:#0a1b2b}
.summary-list{margin-top:10px}
.summary-items{display:flex;flex-direction:column;gap:6px;margin-top:6px}
.summary-row{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;border-radius:10px;border:1px solid var(--line);background:#ffffff;font-size:0.85rem;font-weight:700;color:#0a1b2b}
.filter-chips{display:flex;gap:6px;flex-wrap:wrap}
.filter-btn{padding:6px 10px;border-radius:999px;border:1px solid #e2e8f0;background:#f8fafc;color:#0a1b2b;font-weight:700;cursor:pointer}
.filter-btn.active{background:linear-gradient(135deg,#0a1b2b,#0f7a57);color:#fff;border-color:rgba(255,255,255,0.3)}
.modal{position:fixed;inset:0;background:rgba(3,7,18,0.55);display:flex;align-items:center;justify-content:center;z-index:100}
.modal.hidden{display:none}
.modal-content{background:var(--card);color:inherit;border-radius:14px;padding:16px;width:min(900px,94vw);max-height:80vh;overflow:auto;box-shadow:0 20px 50px rgba(0,0,0,0.4);border:1px solid var(--line)}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.modal .muted{background:#eef2f7;color:#0a1b2b;border:1px solid #d5dbe4;padding:8px 12px;border-radius:8px;font-weight:700}
.dark .modal .muted{background:#0f172a;color:#fff;border:1px solid #1f2937}
.available-pill{display:inline-flex;align-items:center;justify-content:center;padding:6px 10px;border-radius:8px;border:1px solid var(--line);background:#ffffff;font-weight:700;font-size:0.85rem}
.dark .order-line{background:rgba(15,122,87,0.12);border-color:#1f2937}
.dark .summary-item{background:#0f172a;border-color:#1f2937;color:#e5e7eb}
.dark .summary-row{background:#0b1020;border-color:#1f2937;color:#e5e7eb}
.dark .filter-btn{background:#0f172a;color:#e5e7eb;border-color:#1f2937}
.dark .available-pill{background:#0b1020;border-color:#1f2937;color:#e5e7eb}
.dark input,.dark select,.dark textarea{background:#0f172a;color:#e5e7eb;border-color:#1f2937}
.compact .card{padding:10px}
.compact .form-row{gap:6px}
.compact .line-items{gap:6px}
.suggestions{position:absolute;top:100%;left:0;background:#fff;border:1px solid #e6edf3;border-radius:6px;max-height:200px;overflow-y:auto;z-index:10;width:100%;min-width:200px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
.with-suggest{position:relative;display:block}
.form-row label{display:flex;flex-direction:column;flex:1;font-size:0.9rem}
.form-row input,.form-row textarea,.form-row select{padding:8px;border-radius:6px;border:1px solid #e6edf3}
.eta-input{padding-right:40px}
.eta-input::-webkit-calendar-picker-indicator{cursor:pointer;padding:6px;border-radius:8px;background-color:rgba(15,122,87,0.14)}
.dark .eta-input::-webkit-calendar-picker-indicator{background-color:rgba(15,122,87,0.32)}
.inventory-form button{padding:10px 12px;border-radius:8px;border:none;background:var(--accent);color:#fff;font-weight:700;box-shadow:0 8px 16px rgba(15,122,87,0.25)}
.inventory-form button.muted{background:#eef2f7;color:#0a1b2b;border:1px solid #d5dbe4}
.dark .inventory-form button.muted{background:#0f172a;color:#fff;border:1px solid #1f2937}
@media(max-width:680px){.form-row{flex-direction:column}}

.tab-btn{background:#f1f5f9;border:1px solid #e2e8f0;color:#0a1b2b;font-weight:700}
.tab-btn.active{background:linear-gradient(135deg,#0a1b2b,#0f7a57);color:#fff;border-color:rgba(255,255,255,0.3);box-shadow:0 10px 24px rgba(10,27,43,0.2)}
.mode-tabs{display:flex;gap:8px;margin:0 0 6px 0}
.inventory-tabs{flex-wrap:wrap}
.mode-btn{flex:1;padding:10px 12px;border-radius:12px;border:1px solid #e2e8f0;background:#f8fafc;color:#0a1b2b;font-weight:800;cursor:pointer;box-shadow:0 6px 16px rgba(15,27,43,0.08);transition:all .15s ease}
.mode-btn.active{background:linear-gradient(135deg,#0a1b2b,#0f7a57);color:#fff;border-color:rgba(255,255,255,0.28);box-shadow:0 10px 24px rgba(10,27,43,0.22)}
.mode-content{display:none}
.mode-content.active{display:block}
.page-grid{display:grid;grid-template-columns:2fr 1.3fr;gap:14px;align-items:start}
@media(max-width:960px){
  .page-grid{grid-template-columns:1fr}
}
.muted-text{color:var(--muted);font-size:0.9rem;margin:0 0 8px 0}
.data-toolbar{display:flex;align-items:center;gap:10px;margin:8px 0}
.data-toolbar input{max-width:200px}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:0.75rem;font-weight:700;line-height:1;border:1px solid #e2e8f0;color:#0a1b2b;background:#f8fafc}
.badge.info{background:rgba(15,122,87,0.12);color:#0a1b2b;border-color:rgba(15,122,87,0.3)}
.badge.warn{background:rgba(234,179,8,0.14);color:#854d0e;border-color:rgba(234,179,8,0.4)}
.badge.danger{background:rgba(239,68,68,0.14);color:#7f1d1d;border-color:rgba(239,68,68,0.4)}
.sticky-actions-mobile{position:sticky;bottom:0;padding:8px 0;background:var(--card);z-index:5}
.dark .sticky-actions-mobile{background:#0d1624}
.bulk-box textarea{font-family:ui-monospace,SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace}

/* Role visibility helpers */
body.role-admin .sidebar a[data-role='admin']{display:flex}
body.role-employee .sidebar a[data-role='employee']{display:flex}
body.role-none .sidebar a[data-role]{display:none}
body.role-admin .bottom-nav a[data-role='admin']{display:inline-flex}
body.role-employee .bottom-nav a[data-role='employee']{display:inline-flex}
body.role-none .bottom-nav a[data-role]{display:none}
body.role-employee .admin-only{display:none}

